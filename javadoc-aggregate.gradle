
ext.copyright = "$rootProject.name-$version &#8208; &copy; $year $author"
ext.footer = copyright
ext.docsDir = "$buildDir/docs"

// list all the subprojects
def projectList = new ArrayList()
subprojects.each {subproject ->
	projectList.add(subproject.path)
}

// define a task for aggregating the javadoc of all subprojects in the root project javadoc
task alljavadoc(type: Javadoc) {
	
	// note : javadoc for sub projects is configured in the java.groovy file
	project.configure(options) {
		encoding = "ISO-8859-1"
		author = author
		footer = footer
	}
	
    source projectList.collect { project(it).sourceSets.main.allJava }
    classpath = files(projectList.collect { project(it).sourceSets.main.compileClasspath })
    destinationDir = file("$docsDir/javadoc")
}

// define a task for aggregating the groovydoc of all subprojects in the root project groovydoc
task allgroovydoc(type: Groovydoc) {
    source projectList.collect { project(it).sourceSets.main.allGroovy }
    classpath = files(projectList.collect { project(it).sourceSets.main.compileClasspath })
    groovyClasspath = files(projectList.collect { project(it).sourceSets.main.compileClasspath })
    destinationDir = file("$docsDir/groovydoc")
}
